<!DOCTYPE html>
<head>
    <title>Home</title>
    
    <meta charset="utf-8">
    <style>

    path {
      stroke-linejoin: round;
      stroke-linecap: round;
    }

    svg {
      display: block;
      margin-left: auto;
      margin-right: 45%;
    }

    .districts {
      fill: #bbb;
    }

    .districts :hover {
      fill: #e11a88;
    }

    .district-boundaries {
      pointer-events: none;
      fill: none;
      stroke: #fff;
      stroke-width: .5px;
    }

    .state-boundaries {
      pointer-events: none;
      fill: none;
      stroke: #fff;
      stroke-width: 1.25px;
    }

    #switch-buttons {
      margin-left: 70%;
      margin-right: auto;
      margin-top: auto;
    }

    .switch {
      font-family: Arial;
    }

    </style>
</head>

<body>



    <script type="text/javascript" src="static/js/women-employees.js"></script>
    <script type="text/javascript" src="static/js/women-managers.js"></script>

    <script
      src="https://code.jquery.com/jquery-3.2.1.min.js"
      integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
      crossorigin="anonymous"></script>
    <script type="text/javascript" src="static/d3/d3.min.js"></script>
    <script type="text/javascript" src="static/js/d3-geo.min.js"></script>
    <script src="static/js/queue.v1.min.js"></script>
    <script src="static/js/topojson-client/topojson-client.min.js"></script>
    
    <script src="https://d3js.org/d3-scale-chromatic.v1.min.js"></script>

  <div id="option">
    <button type="submit" onclick="womenEmployeesData()">All Employees (% Women)</button>
    <button type="submit" onclick="womenManagersData()">Managers (% Women)</button>

  </div>


    <script type="text/javascript">

    var width = 960,
        height = 600;

    // define color scale
    var minimumColor = "#edf8fb",
        maximumColor = "#005824";

    var projection = d3.geoAlbersUsa()
      .scale(1280)
      .translate([width / 2, height / 2]);

    var path = d3.geoPath()
        .projection(projection);

    var svg = d3.select("body").append("svg")
        .attr("width", width)
        .attr("height", height);

    // minimum & maximum population values
    var minimum = 0.28,
        maximum = 0.62;

    var color = d3.scaleLinear().domain([minimum, maximum])
    .range([minimumColor, maximumColor]);

    queue()
        .defer(d3.json, "/us.json")
        .defer(d3.json, "/us-congress-113.json")
        .defer(d3.json, "/district-manager-info.json")
        .await(ready);

    function ready(error, us, congress, district) {
      if (error) throw error;

      svg.append("defs").append("path")
          .attr("id", "land")
          .datum(topojson.feature(us, us.objects.land))
          .attr("d", path);

      svg.append("clipPath")
          .attr("id", "clip-land")
        .append("use")
          .attr("xlink:href", "#land");
          
      // congressional districts
      svg.append("g")
          .attr("class", "districts")
          .attr("clip-path", "url(#clip-land)")
          .selectAll("path")
          .data(topojson.feature(congress, congress.objects.districts).features)
      .enter().append("path")
          .attr("d", path)
          .style("fill", function (d) {
            if (district[d.id]) {
              return color(district[d.id]); }
            else {
              return "#F2F3F4"; }
          })

        .append("title")
          .text(function(d) { return d.id; });

      svg.append("path")
          .attr("class", "district-boundaries")
          .datum(topojson.mesh(congress, congress.objects.districts,
            function(a, b) { return a !== b && (a.id / 1000 | 0) === (b.id / 1000 | 0); }))
          .attr("d", path);

      svg.append("path")
          .attr("class", "state-boundaries")
          .datum(topojson.mesh(us, us.objects.states,
            function(a, b) { return a !== b; }))
          .attr("d", path);
      
        d3.select(self.frameElement).style("height", height + "px");

      }


    function womenEmployeesData() {

      var minimum = 0.33,
          maximum = 0.52;

        queue()
        .defer(d3.json, "/us.json")
        .defer(d3.json, "/us-congress-113.json")
        .defer(d3.json, "/district-employee-info.json")
        .await(ready);

        ready(error, us, congress, district);
}

  function womenManagersData() {

        var minimum = 0.28,
            maximum = 0.62;

        queue()
        .defer(d3.json, "/us.json")
        .defer(d3.json, "/us-congress-113.json")
        .defer(d3.json, "/district-manager-info.json")
        .await(ready);

        ready(error, us, congress, district);

  }


    </script>


</body>
</html>